<div class="api-demo-container">
  <h2>API Demo - HTTP Requests</h2>
  <p>Template-driven form to perform POST and GET requests using JSONPlaceholder API.</p>

  <!-- POST: Create New Post -->
  <div class="section">
    <h3>1. Create New Post (POST)</h3>
    <form #postForm="ngForm" (ngSubmit)="submitPost(postForm)">
      <div class="form-group">
        <label for="title">Title:</label>
        <input 
          type="text" 
          id="title" 
          name="title"
          ngModel
          placeholder="Enter post title"
          required>
      </div>

      <div class="form-group">
        <label for="body">Body:</label>
        <textarea 
          id="body" 
          name="body"
          ngModel
          placeholder="Enter post content"
          rows="4"
          required></textarea>
      </div>

      <div class="form-group">
        <label for="userId">User ID:</label>
        <input 
          type="number" 
          id="userId" 
          name="userId"
          ngModel
          placeholder="Enter user ID"
          required>
      </div>

      <button type="submit" class="btn btn-primary">
        Submit
      </button>
    </form>

    <!-- POST Response -->
    <div *ngIf="responseData" class="response-section">
      <h4>âœ… Post Created Successfully!</h4>
      <div class="response-data">
        <p><strong>ID:</strong> {{ responseData.id }}</p>
        <p><strong>Title:</strong> {{ responseData.title }}</p>
        <p><strong>Body:</strong> {{ responseData.body }}</p>
        <p><strong>User ID:</strong> {{ responseData.userId }}</p>
      </div>
    </div>
  </div>

  <!-- GET: Fetch All Posts -->
  <div class="section">
    <h3>2. Get All Posts (GET)</h3>
    <button (click)="getAllPosts()" class="btn btn-secondary">
      Get All Posts
    </button>

    <div *ngIf="allPosts.length > 0" class="response-section">
      <h4>ðŸ“‹ All Posts (First 10):</h4>
      <div class="posts-grid">
        <div *ngFor="let post of allPosts" class="post-card">
          <h5>{{ post.title }}</h5>
          <p><strong>ID:</strong> {{ post.id }}</p>
          <p><strong>User ID:</strong> {{ post.userId }}</p>
          <p class="post-body">{{ post.body | slice:0:100 }}{{ post.body.length > 100 ? '...' : '' }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- GET: Fetch Single Post -->
  <div class="section">
    <h3>3. Get Single Post by ID (GET)</h3>
    <div class="form-group">
      <label for="postId">Post ID:</label>
      <input 
        type="number" 
        id="postId" 
        [(ngModel)]="postId"
        min="1" 
        max="100"
        placeholder="Enter post ID">
      <button (click)="getSinglePost()" class="btn btn-secondary">
        Get Post
      </button>
    </div>

    <div *ngIf="singlePost" class="response-section">
      <h4>ðŸ“„ Single Post Retrieved:</h4>
      <div class="single-post">
        <p><strong>ID:</strong> {{ singlePost.id }}</p>
        <p><strong>Title:</strong> {{ singlePost.title }}</p>
        <p><strong>User ID:</strong> {{ singlePost.userId }}</p>
        <p><strong>Body:</strong> {{ singlePost.body }}</p>
      </div>
    </div>
  </div>

  <!-- PUT: Update Post -->
  <div class="section">
    <h3>4. Update Post by ID (PUT)</h3>
    <form #updateForm="ngForm" (ngSubmit)="updatePost(updateForm)">
      <div class="form-group">
        <label for="updatePostId">Post ID to Update:</label>
        <input 
          type="number" 
          id="updatePostId" 
          [(ngModel)]="updatePostId"
          name="updatePostId"
          min="1" 
          max="100"
          placeholder="Enter post ID to update"
          required>
      </div>

      <div class="form-group">
        <label for="updateTitle">New Title:</label>
        <input 
          type="text" 
          id="updateTitle" 
          name="title"
          ngModel
          placeholder="Enter new post title"
          required>
      </div>

      <div class="form-group">
        <label for="updateBody">New Body:</label>
        <textarea 
          id="updateBody" 
          name="body"
          ngModel
          placeholder="Enter new post content"
          rows="4"
          required></textarea>
      </div>

      <div class="form-group">
        <label for="updateUserId">User ID:</label>
        <input 
          type="number" 
          id="updateUserId" 
          name="userId"
          ngModel
          placeholder="Enter user ID"
          required>
      </div>

      <button type="submit" class="btn btn-warning">
        Update Post
      </button>
    </form>

    <!-- PUT Response -->
    <div *ngIf="updateResponse" class="response-section">
      <h4>âœ… Post Updated Successfully!</h4>
      <div class="response-data">
        <p><strong>ID:</strong> {{ updateResponse.id }}</p>
        <p><strong>Title:</strong> {{ updateResponse.title }}</p>
        <p><strong>Body:</strong> {{ updateResponse.body }}</p>
        <p><strong>User ID:</strong> {{ updateResponse.userId }}</p>
      </div>
    </div>
  </div>

  <!-- DELETE: Delete Post -->
  <div class="section">
    <h3>5. Delete Post by ID (DELETE)</h3>
    <div class="form-group">
      <label for="deletePostId">Post ID to Delete:</label>
      <input 
        type="number" 
        id="deletePostId" 
        [(ngModel)]="deletePostId"
        min="1" 
        max="100"
        placeholder="Enter post ID to delete">
      <button (click)="deletePost()" class="btn btn-danger">
        Delete Post
      </button>
    </div>

    <!-- DELETE Response -->
    <div *ngIf="deleteResponse" class="response-section">
      <h4>âœ… Post Deleted Successfully!</h4>
      <div class="response-data">
        <p><strong>Deleted Post ID:</strong> {{ deleteResponse.id }}</p>
        <p><strong>Status:</strong> {{ deleteResponse.message }}</p>
      </div>
    </div>
  </div>

  <!-- API Info -->
  <div class="api-info">
    <h4>ðŸ”— API Information</h4>
    <p><strong>Base URL:</strong> https://jsonplaceholder.typicode.com/posts</p>
    <ul>
      <li><strong>POST /posts</strong> - Create a new post</li>
      <li><strong>GET /posts</strong> - Get all posts</li>
      <li><strong>GET /posts/:id</strong> - Get a single post by ID</li>
      <li><strong>PUT /posts/:id</strong> - Update an existing post</li>
      <li><strong>DELETE /posts/:id</strong> - Delete a post by ID</li>
    </ul>
  </div>
</div>
